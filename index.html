<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>I miei animali Preferiti</title>
    <link rel="stylesheet" href="style.css">
        <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
        <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
        <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
        <!--per prima cosa installo le cdn -->
    <script type="text/babel">

     function Modal({
      title, 
      content, 
      show = false, 
      onClose = () => {},
      onConfirm = () => {}
      }){
      return show && ReactDOM.createPortal(
          <div className="modal-container">
              <div className="modal">
                  <h2>{title}</h2>
                  <p>{content}</p>
                  <div>
                    <button onClick={onClose}>Annulla</button>
                    <button onClick={onConfirm}>Conferma</button>
                  </div>
                </div>
          </div>,
          document.body
        )
      }
      //inizio la creazione della componente 
      
      //Usa un array predefinito per scegliere casualmente:
      // ho cambiato animals trasformando in una variabile dinamica la logica sarebbe che al click del pulsante si aggiunge un nuovo elemento all'array vuoto
      const animalsChoices = ["Cane", "Gatto", "Pappagallo", "Cavallo", "Panda"];
      const { useState } = React;
      //creo un map per inserire nella summary l'array di stringhe creato precedentemente 
      const Animal = () =>{ 
      const [animals , setAnimals] = useState([]);
      // creo un nuovo state che inizialmente √® false da passare alla modale 
      const [show ,  setShow] = useState(false)

      const [animalName ,  setAnimalName] = useState("")
     //creo la funzione aggiungi animale per vedere un animale nella ul 
     //let i = Math.floor(Math.random() * a.length); per prendere un elemento random da un array
      const addAnimal = () => {
        //dobbiamo chiederci se animalName √® vuoto
        if(!animalName) return;
        setAnimals(curr =>[...curr , animalName])
        //svuoto animalName
        setAnimalName("")
        //setShow ritorna false
        setShow(false)

         }
     
      return(
        /*Aggiungi un bottone "Aggiungi Animale" sopra il <details>.
            Cliccando il bottone, un animale casuale viene aggiunto alla lista.*/
         <>
          <h3>clicca il bottone per aggiungere un animale!</h3>
          <button
          //cambio adesso la funzione del bottone che al click cambia lo stato di show in true per aprire la modale 
          onClick={() => setShow(true)}>clicca qui</button>
          <details>
            <summary>Animali</summary>
            <ul>ecco la lista degli animali
            {animals.map((a , index) =>{
              return (<li key={index}>{a}</li>)
            })}</ul>
            </details>
          {/*aggiungo per comodit√† la modale a pi√® componente*/}
            <Modal
            show={show}
            onClose={ () => setShow(false) }
            onConfirm={addAnimal}
            title="aggiungi animale"
            content={
                <input
                  type="text"
                  value={animalName}
                  onChange={e => setAnimalName(e.target.value)}
                />
            }
            
            />
            </>
           
      );
     }
//creo  il componente da passare nella root per renderizzarlo in HTML
      const { createRoot } = ReactDOM;

      const listaAnimali = document.querySelector(".lista-animali")

      const root = createRoot(listaAnimali)
      // passo alla root la componente react che ho creato 
      root.render(<Animal/>)

    </script>
</head>
<body>
    <header>
      <h1>I miei animali Preferiti</h1>
    </header>
    <main>
        <figure>
            <img src="https://picsum.photos/400/300" alt="Immagine Casuale">
        </figure>
        <div class="lista-animali"></div>
    </main>
      <footer>
      <p>Creato con amore da... un collega sbadato! üêæ</p>
    </footer>
  </body>
</html>




